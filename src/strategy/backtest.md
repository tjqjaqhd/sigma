# 사양서(명세서) - backtest 모듈

## 1. 목적 및 개요
- 과거 데이터로 전략의 성과를 검증(수익률, 리스크 등)하는 백테스트 기능 제공
- **업비트 현물-바이낸스 공매도 1배 차익거래 등 복수 거래소/포지션 전략도 백테스트 가능해야 함**
- **실제 전략 함수와 직접 연동되어, 실전과 동일한 로직으로 검증(백테스트) 가능해야 함**

## 2. 입력/출력
- 입력: 전략 함수, 과거 데이터, 시작 자산 등
- 출력: 거래 내역, 최종 잔고, 수익률 등
- **차익거래 입력/출력 예시:**
    - 입력: 업비트/바이낸스 과거 가격 데이터, 거래 대상 코인, 주문 수량 등
    - 출력: 각 거래소 포지션/잔고 변화, 누적 차익, 실패/예외 로그 등

## 3. 동작 조건 및 예외
- 데이터 포맷 불일치, 전략 함수 오류 시 예외 처리

## 4. 참고사항
- 수수료, 슬리피지, 포지션 관리 등 확장 가능
- **차익거래 전략도 반드시 백테스트로 과거 데이터에 대입해 검증 후 실전 적용**
- **백테스트는 실전과 동일한 전략 함수와 직접 연동되어야 하며, 전략 검증(테스트)용임을 명확히 함**
- 전략 신호 함수(`arbitrage_signal_strategy`)는 별도 파일(`arbitrage_signal.py`)에 정의되어 있으며, 백테스트에서는 import 하여 사용합니다.
- 예시: `from src.strategy.arbitrage_signal import arbitrage_signal_strategy`
- 주문 실행 함수는 src/execution/executor.py의 execute_order를 사용하며, mode 파라미터('simulation', 'live', 'backtest')로 실전/시뮬/백테스트를 분기합니다.
- 모든 예외/에러는 utils.error_handling.handle_error로 처리됩니다. 
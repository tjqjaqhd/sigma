# 사양서(명세서) - data 레이어

## 1. 레이어/기능명
data (데이터 수집, 전처리, 저장)

## 2. 목적 및 개요
- 시장, 뉴스, 소셜, 외부 API 등 다양한 소스에서 실시간 데이터를 수집한다.
- 수집된 데이터는 전처리/정제 과정을 거쳐 DB/메모리 캐시에 저장된다.
- 포트폴리오, 시장데이터, 상태 정보 등도 함께 관리한다.

## 3. 입력/출력
- 입력: 없음(내부적으로 API 호출, 옵션으로 top_n 상위 N개 지정 가능)
- 출력: 거래량 상위 N개 종목의 리스트, 정제/정규화된 데이터 등
  - 각 항목: {'market': 마켓코드, 'korean_name': 한글명, 'trade_price': 현재가, 'acc_trade_price_24h': 24시간 누적 거래대금}

## 4. 동작 조건 및 예외
- API 호출 실패 시 재시도 또는 빈 리스트 반환
- 데이터 포맷 불일치 시 예외 처리
- 외부 API의 응답 속도/제한에 따라 batch로 나누어 조회
- 결측치, 이상치 처리, 데이터 타입 불일치 시 예외 처리

## 5. 기타 참고사항
- 기본적으로 KRW 마켓(원화 거래)만 대상으로 함
- 수집 주기/스케줄 관리 필요(예: 1분/5분 단위)
- requests 라이브러리 필요
- 데이터 파이프라인과 연동 
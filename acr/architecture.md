# 시스템 아키텍처 문서 (Architecture)

---

## 1. 시스템 개요

이 시스템은 GPT가 전략을 직접 생산하는 완전 자동화 트레이딩 파이프라인입니다. 데이터 수집부터 전략 생산, 실행, 피드백, 대시보드까지 모든 과정을 모듈화하여 관리하며, 각 모듈은 사양서와 코드가 1:1로 대응됩니다.

---

## 2. 전체 구조 및 데이터 흐름

```mermaid
flowchart TD
    A[데이터 수집<br>(data_collector)] --> B[데이터 전처리<br>(preprocessor)]
    B --> C[이벤트 감지<br>(event_detector)]
    C --> D[전략 생산<br>(strategy_engine, GPT)]
    D --> E[전략 실행<br>(executor)]
    E --> F[피드백/모니터링<br>(feedback)]
    F --> G[대시보드<br>(dashboard)]
    E --> G
    D --> G
    C --> G
    B --> G
    A --> G
```

---

## 3. 각 모듈 역할

- **data_collector**: 시장, 뉴스, 소셜 등 다양한 소스에서 실시간 데이터 수집
- **preprocessor**: 수집된 데이터의 정제, 정규화, 이상치/결측치 처리
- **event_detector**: 전처리된 데이터에서 트리거/이벤트(특정 조건, 신호 등) 감지
- **strategy_engine**: 감지된 이벤트와 시장 상황을 바탕으로 GPT가 전략을 직접 생산
- **executor**: 생성된 전략에 따라 실제 주문 실행, 포트폴리오 상태 관리
- **feedback**: 주문/전략 실행 결과를 수집, 분석하여 시스템 성능 모니터링
- **dashboard**: 실시간 데이터, 전략, 실행 결과, 피드백을 웹 UI로 시각화/모니터링

---

## 4. 데이터/이벤트 흐름

1. **data_collector**가 외부 데이터(시장, 뉴스, 소셜 등)를 주기적으로 수집
2. **preprocessor**가 수집된 데이터를 정제/정규화
3. **event_detector**가 전처리된 데이터에서 이벤트(트리거) 감지
4. **strategy_engine**이 이벤트와 시장 상황을 바탕으로 GPT로 전략을 직접 생산
5. **executor**가 전략에 따라 주문 실행 및 포트폴리오 상태 업데이트
6. **feedback**이 실행 결과를 수집/분석하여 성과 및 개선점 도출
7. **dashboard**가 전체 과정을 실시간으로 시각화/모니터링

---

## 5. 기술스택 및 특징

- **Python**: 전체 백엔드 및 모듈 구현
- **OpenAI GPT API**: 전략 생산(내부에서 직접 생성)
- **웹 대시보드**: Streamlit, Dash, React 등 활용 가능
- **DB/캐시**: SQLite, PostgreSQL, Redis 등(선택)
- **모듈별 사양서 관리**: 모든 기능은 spec.md와 코드가 1:1로 관리됨

---

## 6. 확장/운영 관련 참고사항

- 각 모듈은 독립적으로 테스트/확장 가능
- 대시보드는 별도 웹앱으로 분리되어 운영
- 1인 개발자 환경(4코어 CPU, 16GB RAM, 월 8만원 GPT API 예산 기준)에서도 충분히 운영 가능

---

## 7. 리마인드(핵심 요약)

- 모든 모듈은 acr 폴더 하위에 위치하며, 사양서와 코드가 세트로 관리됨
- GPT가 외부 주입 없이 전략을 직접 생산
- 대시보드는 웹앱으로 분리(현실적, 유지보수 용이)
- 전체 파이프라인이 자동화되어 실시간으로 데이터→전략→실행→피드백→시각화가 순환 